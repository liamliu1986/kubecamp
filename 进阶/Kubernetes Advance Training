Kubernetes Advance Training

    大家好！

    姓名： 刘智     手机： 13644931184（微信号）
    email： lzcy5151@gmail.com/lzcy5151@163.com

    课上课下有问题随时沟通，尤其是生产环境中遇到的各类问题，欢迎交流    



Kubernetes and Docker 

计算机硬件：
    小型机 -- > X86 --> 虚拟化 --> container --> Kubernetes

软件：
    单体应用 -- >垂直的分层架构 -- 》 SOA --》 微服务，DDD（领域驱动开发）

工程效能：
    Lean -- 》Agile -- > DevOps --> AIops


虚拟化VS容器： 
    虚拟化：一个完整的OS
    容器化：共享kernel，更小、更快、更灵活

实现容器化的核心机制：
    namespace
    cgruops
    UFS

    lxc -- > go --> docker --> libcontainer --> Kubernetes

    image:
        bootfs + rootfs + layers
        image readonly --> running --> image + writeable layers

    network:
        bridge
        host
        overlay(CNI)
        macvlan

    volume:
        volume
        bindmount   

    docker swarm:

        service

        docker stack

Kubernetes:
    容器编排：
        混乱 --> kubernetes --> 井然有序

    产生原因：
        IaC


    k8s优势：
        1. 服务发现和负载均衡（kube-proxy）
        2. 持久化管理  （PV， PVC）
        3. 自动化部署和回滚 （RS,Deployment,StatefulSet,DaemonSet）
        4. 资源的分配调度 （kube-scheduler）
        5. 自我修复机制（RS）
        6. 密钥和配置（secret,configmap）
        7. 大规模编排（helm,yaml）
        8. 自动伸缩（autoscaler）


    k8s 核心组件：
        api-server
        kubelet
        kube-proxy
        kube-scheduler
        controller manager
        etcd
        cni  

    k8s 资源：
        netowort policy(calico)
        pod
        RS 
        Deployment          service  负载均衡到后端 
        StatefulSet         name-0.sfsname.namespace.svc.cluster.local
        DaemonSet           每一个Node节点上，都部署一个副本
        Job
        CronJob
        service             service 两种IP PODIP ， ClusterIP PODs 的虚拟地址 

                            servicIP  serviceName endpoints(1,2,3,4)

        Ingress             7layer 负载 nginx proxy,ingress controller nginx proxy
        PV                      
        PVC
        secret 
        configmap


        